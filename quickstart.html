<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Usage with Opaque SQL" href="opaquesql_usage.html" /><link rel="prev" title="Installation" href="install.html" />

    <meta name="generator" content="sphinx-3.0.3, furo 2021.06.18.beta36"/>
        <title>Quickstart - MC2 Client documentation</title>
      <link rel="stylesheet" href="_static/styles/furo.css?digest=9b17055c4366e8b2949c66d6a9d8b0efe4dbaa60">
    <link rel="stylesheet" href="_static/pygments.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: #3681da;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #00B0FF;
  --color-brand-content: #00B0FF;
  --color-admonition-background: #3681da;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="_static/pygments_dark.css">
    <link rel="stylesheet" href="_static/styles/furo-extensions.css?digest=ee12cdd73c4bbac24afec78d92c4afd7c2d8ea7f"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">MC<sup>2</sup> Client  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">MC<sup>2</sup> Client  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="opaquesql_usage.html">Usage with Opaque SQL</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="config/index.html">Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="config/config.html">Global Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="config/azure.html">Azure Configuration</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="python/index.html">Python Interface</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="python/usage.html">Python Package Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="python/api.html">API Reference</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="cli/index.html">CLI Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="cli/usage.html">CLI Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli/api.html">CLI Reference</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <section id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>This quickstart will give you a flavor of using MC<sup>2</sup> with Opaque SQL, and can be entirely done locally with Docker if desired. You will use MC<sup>2</sup> Client to encrypt some data, transfer the encrypted data to a remote machine, run an Opaque SQL job on the encrypted data on the remote machine, and retrieve and decrypt the job’s encrypted results. To run everything securely, you can choose to spin up Opaque SQL on Azure VMs with SGX-support. Alternatively, to get a flavor of MC<sup>2</sup> without having to use Azure, you can use the deployment of Opaque SQL in the Docker container.</p>
<p>MC<sup>2</sup> Client provides a command line interface that enables you to remotely interact with MC<sup>2</sup> compute services. The CLI relies on a <a class="reference internal" href="config/config.html"><span class="doc">configuration file</span></a> that you should modify before each step in this quickstart to tell MC<sup>2</sup> Client what exactly you want to do.</p>
<section id="docker-quickstart">
<h2>Docker Quickstart<a class="headerlink" href="#docker-quickstart" title="Permalink to this headline">¶</a></h2>
<p>If you’d like to try everything out locally, you can do so within the Docker container you built in the <a class="reference internal" href="install.html"><span class="doc">installation</span></a> section.</p>
<ol class="arabic simple">
<li><p>Copy the contents of the <code class="docutils literal notranslate"><span class="pre">quickstart</span></code> directory to your mounted “playground” directory to ensure that your changes inside the container get reflected on your host. Then, set the <code class="docutils literal notranslate"><span class="pre">MC2_CONFIG</span></code> environment variable to the path of your configuration file.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># From the /mc2/client directory</span>
cp -r quickstart/* playground
<span class="nb">export</span> <span class="nv">MC2_CONFIG</span><span class="o">=</span>&lt;/path/to/playground/config.yaml&gt;
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Optionally, generate a keypair and a symmetric key that MC<sup>2</sup> Client will use to encrypt your data. Specify your username and output paths in the <code class="docutils literal notranslate"><span class="pre">user</span></code> section of the configuration file. Then, generate the keys.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 init
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Start the Opaque SQL compute service.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 start
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Prepare your data for computation by encrypting and uploading it. Note that “uploading” here means copying because we have a local deployment.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 upload
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Run the provided Opaque SQL quickstart script, to be executed by MC<sup>2</sup>. The script can be found [here](quickstart/opaque_sql_demo.scala).</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 run
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Once computation has finished, you can retrieve your encrypted results and decrypt them. Specify the results’ path and their encryption format in the <code class="docutils literal notranslate"><span class="pre">download</span></code> section of configuration. The decrypted results will be in the same directory.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 download
</pre></div>
</div>
</section>
<section id="azure-quickstart">
<h2>Azure Quickstart<a class="headerlink" href="#azure-quickstart" title="Permalink to this headline">¶</a></h2>
<p>You can also choose to run this quickstart with enclave-enabled VMs on the cloud with Azure Confidential Computing. This guide will take you through launching such VMs and using them with MC<sup>2</sup>.</p>
<ol class="arabic simple">
<li><p>In the container, copy the contents of the <code class="docutils literal notranslate"><span class="pre">quickstart</span></code> directory to your mounted “playground” directory to ensure that your changes inside the container get reflected on your host. Otherwise, no need to do anything. Then, set the <code class="docutils literal notranslate"><span class="pre">MC2_CONFIG</span></code> environment variable to the path of your configuration file.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># From the /mc2/client directory</span>
cp -r quickstart/* playground
<span class="nb">export</span> <span class="nv">MC2_CONFIG</span><span class="o">=</span>&lt;/path/to/playground/config.yaml&gt;
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Optionally, generate a keypair and a symmetric key that MC<sup>2</sup> Client will use to encrypt your data. Specify your username and output paths in the <code class="docutils literal notranslate"><span class="pre">user</span></code> section of the configuration file. Then, generate the keys.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 init
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Next, launch the machines and resources you’ll be using for computation. MC<sup>2</sup> Client provides an interface to launch resources on Azure (and sets up the machines with necessary dependencies). Take a look at the <code class="docutils literal notranslate"><span class="pre">launch</span></code> section of the configuration file – you’ll need to specify the path to your <a class="reference internal" href="config/azure.html"><span class="doc">Azure configuration file</span></a>, which is a YAML file that details the names and types of various resources you will launch.</p></li>
</ol>
<p>Next, log in to Azure through the command line and set your subscription ID. <a class="reference external" href="https://docs.microsoft.com/en-us/azure/media-services/latest/setup-azure-subscription-how-to?tabs=portal">Here</a> are instructions on how to find your subscription ID.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>az login
az account <span class="nb">set</span> -s &lt;YOUR_SUBSCRIPTION_ID&gt;
</pre></div>
</div>
<p>Once you’ve done that, launch the resources.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 launch
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Start the Opaque SQL compute service.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 start
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Prepare your data for computation by encrypting and uploading it.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 upload
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li><p>Run the provided Opaque SQL demo script, to be executed by MC<sup>2</sup>. The script can be found [here](quickstart/opaque_sql_demo.scala). All paths in the script are remote paths, since the script will be executing on the remote Opaque SQL service. Then, go to the <code class="docutils literal notranslate"><span class="pre">run</span></code> section of the configuration and specify the path to your script, as well as parameters for remote attestation. Run the following command to remotely start computation.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 run
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li><p>Once computation has finished, you can retrieve your encrypted results and decrypt them.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 download
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li><p>Once you’ve finished using your Azure resources, you can use MC<sup>2</sup> Client to terminate them. You can specify which resources to terminate in the <code class="docutils literal notranslate"><span class="pre">teardown</span></code> section of the configuration.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mc2 teardown
</pre></div>
</div>
</section>
</section>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="opaquesql_usage.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Usage with Opaque SQL</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="install.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, MC2 Team
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="_sources/quickstart.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Quickstart</a><ul>
<li><a class="reference internal" href="#docker-quickstart">Docker Quickstart</a></li>
<li><a class="reference internal" href="#azure-quickstart">Azure Quickstart</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>